-- EXPORTED TRIGGERS & FUNCTIONS (2026-01-27)

-- FUNCTION: public.update_updated_at_column()
-- Definition:
-- CREATE OR REPLACE FUNCTION public.update_updated_at_column() RETURNS trigger LANGUAGE plpgsql SET search_path TO 'public' AS $function$ BEGIN NEW.updated_at = NOW(); RETURN NEW; END; $function$

-- TRIGGER: handle_updated_at
-- Table: brand_guidelines
-- Definition: CREATE TRIGGER handle_updated_at BEFORE UPDATE ON brand_guidelines FOR EACH ROW EXECUTE FUNCTION moddatetime('updated_at')
-- Note: Uses extension function extensions.moddatetime()

-- TRIGGER: update_brand_profiles_updated_at
-- Table: brand_profiles
-- Definition: CREATE TRIGGER update_brand_profiles_updated_at BEFORE UPDATE ON brand_profiles FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()

-- TRIGGER: update_profiles_updated_at
-- Table: profiles
-- Definition: CREATE TRIGGER update_profiles_updated_at BEFORE UPDATE ON profiles FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()

-- TRIGGER: update_subscriptions_updated_at
-- Table: subscriptions
-- Definition: CREATE TRIGGER update_subscriptions_updated_at BEFORE UPDATE ON subscriptions FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()

-- TRIGGER: update_tenants_updated_at
-- Table: tenants
-- Definition: CREATE TRIGGER update_tenants_updated_at BEFORE UPDATE ON tenants FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()

-- TRIGGER: update_usage_ledger_updated_at
-- Table: usage_ledger
-- Definition: CREATE TRIGGER update_usage_ledger_updated_at BEFORE UPDATE ON usage_ledger FOR EACH ROW EXECUTE FUNCTION update_updated_at_column()
